{% extends "base.html" %}

{% block title %}
    미세먼지 데이터 분석
{% endblock %}

{% block content %}
<div class="container-fluid px-4">
    <h1 class="mt-4">미세먼지 데이터 분석</h1>

    <div class="row">
        <!-- PM2.5 연평균 차트 -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-line me-1"></i>
                    PM2.5 연평균 비교 (한국 vs 중국)
                </div>
                <div class="card-body">
                    <canvas id="pm25Chart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
        <!-- PM10 연평균 차트 -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-line me-1"></i>
                    PM10 연평균 비교 (한국 vs 중국)
                </div>
                <div class="card-body">
                    <canvas id="pm10Chart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 추가 차트: PM2.5 월평균 차트 -->
    <div class="row">
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-line me-1"></i>
                    PM2.5 월평균 비교 (한국 vs 중국)
                </div>
                <div class="card-body">
                    <canvas id="pm25MonthlyChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
        <!-- PM10 월평균 차트 -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-line me-1"></i>
                    PM10 월평균 비교 (한국 vs 중국)
                </div>
                <div class="card-body">
                    <canvas id="pm10MonthlyChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 추가 차트: PM2.5 계절별 차트 -->
    <div class="row">
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    PM2.5 계절별 비교 (한국 vs 중국)
                </div>
                <div class="card-body">
                    <canvas id="pm25SeasonChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
        <!-- PM10 계절별 차트 -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    PM10 계절별 비교 (한국 vs 중국)
                </div>
                <div class="card-body">
                    <canvas id="pm10SeasonChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 추가 차트: 한국 월평균 습도 및 풍속 차트 -->
    <div class="row">
        <div class="col-xl-12">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    월 평균 습도 & 풍속
                </div>
                <div class="card-body">
                    <canvas id="weatherChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 차트 데이터를 전달 -->
    <div id="chart-data"
        data-pm25='{{ pm25_data | tojson if pm25_data else "{}" }}'
        data-pm10='{{ pm10_data | tojson if pm10_data else "{}" }}'
        data-pm25-monthly='{{ pm25_monthly_data | tojson if pm25_monthly_data else "{}" }}'
        data-pm10-monthly='{{ pm10_monthly_data | tojson if pm10_monthly_data else "{}" }}'
        data-pm25-season='{{ pm25_season_data | tojson if pm25_season_data else "{}" }}'
        data-pm10-season='{{ pm10_season_data | tojson if pm10_season_data else "{}" }}'
        data-weather='{{ weather_data | tojson if weather_data else "{}" }}'>
    </div>
</div>

<!-- Chart.js 라이브러리 (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4"></script>

<!-- 차트 스크립트 -->
<script src="/static/js/pm_comparison_charts.js"></script> <!-- PM2.5 및 PM10 연평균 차트 스크립트 -->
<script src="/static/js/pm_month_charts.js"></script> <!-- PM2.5 및 PM10 월평균 차트 스크립트 -->
<script src="/static/js/pm_season_charts.js"></script> <!-- PM2.5 및 PM10 계절별 차트 스크립트 -->
<script src="/static/js/pm_weather_chart.js"></script> <!-- 한국 월평균 습도 및 풍속 차트 스크립트 -->
{% endblock %}
